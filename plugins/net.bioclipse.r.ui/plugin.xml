<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>

   <extension
         point="org.eclipse.ui.views">

      <view
         name="R Console"
         icon="icons/source.gif"
         category="net.bioclipse.ScriptingCategory"
         class="net.bioclipse.r.ui.views.RConsoleView"
         id="net.bioclipse.r.ui.views.RConsoleView">
         <description>
            R Console View
         </description>
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="net.bioclipse.r.ui.editors.REditor"
            contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
            extensions="r"
            icon="icons/r_icon.gif"
            id="net.bioclipse.r.ui.editors.REditor"
            name="R Editor">
      </editor>
   </extension>

     <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="net.bioclipse.r.ui.editors.REditor.active">
             <with
                  variable="activeEditorId">
               <equals
                     value="net.bioclipse.r.ui.editors.REditor">
               </equals>
           </with>
      </definition>
   </extension>

    <extension point="org.eclipse.ui.commands">
        <command
           id="net.bioclipse.r.ui.SourceRSnippet"
           defaultHandler="net.bioclipse.r.ui.handlers.SourceRSnippetHandler"
           name="Source selected R snippet"/>
        <command
           id="net.bioclipse.r.ui.runRAll"
           defaultHandler="net.bioclipse.r.ui.handlers.SourceRAllHandler"
           name="Source editor content in R"/>
        <command
           id="net.bioclipse.r.ui.SourceRScript"
           defaultHandler="net.bioclipse.r.ui.handlers.SourceRScriptHandler"
           name="Source R Script"/>
        <command
              defaultHandler="net.bioclipse.r.ui.handlers.SaveRSessionHandler"
              id="net.bioclipse.r.ui.SaveRSession"
              name="Save R session">
        </command>
        <command
              defaultHandler="net.bioclipse.r.ui.handlers.RunLinesCodeHandler"
              id="net.bioclipse.r.ui.RunLinesCode"
              name="Run current line/selected lines in R">
        </command>
   </extension>

   <extension
         point="org.eclipse.ui.menus">

	  <menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<command
              commandId="net.bioclipse.r.ui.SourceRSnippet"
              label="Source selected R snippet">
            	<visibleWhen>
			   		<iterate operator="and" ifEmpty="false">
		      			  <adapt type="org.eclipse.jface.text.ITextSelection" />
					   	  <reference definitionId="net.bioclipse.r.ui.editors.REditor.active" />
			   		</iterate>
		    	</visibleWhen>
        	</command>
   	</menuContribution>

	  <menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<command
              commandId="net.bioclipse.r.ui.runRAll"
              label="Source editor content in R">
            	<visibleWhen>
			   		<iterate operator="and" ifEmpty="false">
		      			  <adapt type="org.eclipse.jface.text.ITextSelection" />
					   	  <reference definitionId="net.bioclipse.r.ui.editors.REditor.active" />
			   		</iterate>
		    	</visibleWhen>
        	</command>
   	</menuContribution>
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=additions">
       <command
             commandId="net.bioclipse.r.ui.RunLinesCode"
             label="Run current line/selected lines in R">
          <visibleWhen>
 			   		<iterate operator="and" ifEmpty="false">
		      			  <adapt type="org.eclipse.jface.text.ITextSelection" />
					   	  <reference definitionId="net.bioclipse.r.ui.editors.REditor.active" />
			   		</iterate>
         </visibleWhen>
       </command>
    </menuContribution>

    <menuContribution
			locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
	<toolbar id="net.bioclipse.r.ui.toolbar">
        <command
              commandId="net.bioclipse.r.ui.SourceRScript"
              label="Source R Script"
              icon="icons/r_icon.gif">
			<visibleWhen>
                  <reference
                        definitionId="net.bioclipse.r.ui.editors.REditor.active">
                  </reference>
               </visibleWhen>
		</command>
	</toolbar>

   </menuContribution>
    <menuContribution
          locationURI="toolbar:net.bioclipse.r.ui.views.RConsoleView">
       <command
             commandId="net.bioclipse.r.ui.SaveRSession"
             icon="icons/r_icon.gif"
             label="Save R Session"
             style="push">
       </command>
    </menuContribution>

   </extension>

 <extension
       point="org.eclipse.help.toc">
    <toc
          file="toc.xml"
          primary="true">
    </toc>
 </extension>
</plugin>
